# Weather maps 2.0

Forecast, Historical and Current weather maps. 15 weather map [layers](https://openweathermap.org/api/weather-map-2#layers).

You can get all of them using only one simple URL!

Using one simple URL you can get the following weather maps:

- **Current weather maps**
- **Forecast weather maps**: The forecast for 10 days with a 3 hours-step
- **Historical weather map**: Archive since March, 2019

# **URL format and parameters**

Use the following URL format and parameters to get weather maps. Please pay attention to the URL example.

**API call**

```
http://maps.openweathermap.org/maps/2.0/weather/{op}/{z}/{x}/{y}?appid={API key}
```

| **Parameters** |  |  |
| --- | --- | --- |
| `{op}` | required | Weather map layer. Full list of available weather map layers [here](https://openweathermap.org/api/weather-map-2#layers) |
| `{z}` | required | Number of zoom level. You could find information about correlation between zoom levels, X, Y tile coordinate numbers and level scale [here](https://openweathermap.org/faq#zoom_levels) |
| `{x}` | required | Number of x tile coordinate. You could find information about correlation between zoom levels, X, Y tile coordinate numbers and level scale [here](https://openweathermap.org/faq#zoom_levels) |
| `{y}` | required | Number of y tile coordinate. You could find information about correlation between zoom levels, X, Y tile coordinate numbers and level scale [here](https://openweathermap.org/faq#zoom_levels) |
| `appid` | required | Your unique API key (you can always find it on your account page under the ["API key" tab](https://home.openweathermap.org/api_keys)) |
| `date` | optional | Date and time of (Unix time, UTC), e.g. date=1552861800. If you do not specify any date and time, you will get Current weather map. More information about how to get Current, Forecast and Historical maps you can find [here](https://openweathermap.org/api/weather-map-2#data). |
| `opacity` | optional | Degree of layer opacity. Available value from 0 to 1 (default - 0.8) |
| `palette` | optional | Color palette. You can use custom palettes for each layer. You can also create a palette for yourself and pass it to the URL as follows `{value}:{HEX color};..;{value}:{HEX color}`. More information about it [here](https://openweathermap.org/api/weather-map-2#palette). |
| `fill_bound` | optional | `true` or `false`. If `true`, then all weather values outside the specified set of values will be filled by color corresponding to the nearest specified value (default value - `false`: all weather values outside the specified set of values are not filled). |
| `arrow_step` | optional | Step of values for drawing wind arrows, specify in pixels (default - 32). Parameter only for wind layers (WND). |
| `use_norm` | optional | `true` or `false`. If `true`, then the length of the arrows is normalizing (default - `false`: the length of the arrows is proportional to the speed wind value). Parameter only for wind layers (WND). |

**URL example**

```
http://maps.openweathermap.org/maps/2.0/weather/TA2/{z}/{x}/{y}?date=1552861800&opacity=0.9&fill_bound=true&appid={API key}
```

You need to insert the generated URL into special plugins.

For example, Leaflet, OpenLayers. You can also use any other apps that support the display of layers. [Learn more](https://openweathermap.org/api/weather-map-2#library).

# **How to get current, forecast and historical weather maps using only 'date' parameter?**

To get current, forecast or historical weather maps you just need to change only `date` parameter in the URL request:

**1. Current weather maps.** Specify the current date and time to get Current weather map. The date and time specified in the request will be rounded to the previous 3-hour interval.

**2. Forecast weather maps.** You can specify any date and time within the next 10 days to get the Forecast weather maps for the specified time. If you do not specify any date and time, you will get Current weather map.

Not available for [TS0](https://openweathermap.org/api/weather-map-2#layers) and [TS10](https://openweathermap.org/api/weather-map-2#layers) layers.

**3. Historical weather maps.** If you specify any date and time since 18 March 2019, you will receive Historical weather maps for the selected date and time. If you do not specify any date and time, you will get Current weather map.

Please note that the date and time specified in the request will be rounded to the previous 3-hour interval (except [TS0](https://openweathermap.org/api/weather-map-2#layers) and [TS10](https://openweathermap.org/api/weather-map-2#layers) layers).

Date and time specified in the request will be rounded to the previous 12-hour interval for [TS0](https://openweathermap.org/api/weather-map-2#layers) and [TS10](https://openweathermap.org/api/weather-map-2#layers) layers.

# **What layers are there in the new weather maps?**

To specify the selected layer in the URL, insert instead of the `{op}` parameter one of the following values:

| **{Op}** | **Meaning** | **Units** |
| --- | --- | --- |
| PAC0 | Convective precipitation | mm |
| PR0 | Precipitation intensity | mm/s |
| PA0 | Accumulated precipitation | mm |
| PAR0 | Accumulated precipitation - rain | mm |
| PAS0 | Accumulated precipitation - snow | mm |
| SD0 | Depth of snow | m |
| WS10 | Wind speed at an altitude of 10 meters | m/s |
| WND | Joint display of speed wind (color) and wind direction (arrows), received by U and V components | m/s |
| APM | Atmospheric pressure on mean sea level | hPa |
| TA2 | Air temperature at a height of 2 meters | °C |
| TD2 | Temperature of a dew point | °C |
| TS0 | Soil temperature 0-10 сm | K |
| TS10 | Soil temperature >10 сm | K |
| HRD0 | Relative humidity | % |
| CL | Cloudiness | % |

# **How to pass my palette in the map?**

For each layer we have custom palettes, but you can use your own palette and pass it to the URL as shown `{value}:{HEX color};..;{value}:{HEX color}`.

The number of values in the custom palette can be any, but not less than 2. You can set the color for any value with any precision.

To pass the code of color, use the HEX format.

**URL Example**

```
http://maps.openweathermap.org/maps/2.0/weather/TA2/{z}/{x}/{y}?date=1552861800&opacity=0.9&fill_bound=true&palette=0:FF0000;10:00FF00;20:0000FF&appid={API key}
```

# **Examples of Weather maps**

# **Air temperature at a height of 2 meters weather layer**

Default parameters

`op` : **TA2**

`fill_bound` : **false**

![](https://openweathermap.org/themes/openweathermap/assets/img/DefPalette_current_weathermaps2.png)

**URL example**

```
http://maps.openweathermap.org/maps/2.0/weather/TA2/{z}/{x}/{y}?appid={API key}
```

# **Air temperature at a height of 2 meters weather layer**

Custom palette

`op` : **TA2**

`opacity` : **0.6**

`fill_bound` : **true**

`palette` : custom (see example)

![](https://openweathermap.org/themes/openweathermap/assets/img/Palette_current_weathermaps2.png)

**URL example**

```
http://maps.openweathermap.org/maps/2.0/weather/TA2/{z}/{x}/{y}?appid={API key}&fill_bound=true&opacity=0.6&palette=-65:821692;-55:821692;-45:821692;-40:821692;-30:8257db;-20:208cec;-10:20c4e8;0:23dddd;10:c2ff28;20:fff028;25:ffc228;30:fc8014
```

# **Accumulated precipitation weather layer**

Default parameters

`op` : **PA0**

![](https://openweathermap.org/themes/openweathermap/assets/img/PA0_current_weathermaps2.png)

**URL example**

```
http://maps.openweathermap.org/maps/2.0/weather/PA0/{z}/{x}/{y}?date=1552861800&appid={API key}
```

# **Atmospheric pressure on mean sea level weather layer**

Default parameters

`op` : **APM**

![](https://openweathermap.org/themes/openweathermap/assets/img/APM_current_weathermaps2.png)

**URL example**

```
http://maps.openweathermap.org/maps/2.0/weather/PA0/{z}/{x}/{y}?date=1552861800&appid={API key}
```

# **Joint display of speed wind (color) and wind direction (arrows) weather layer**

Default parameters

`op` : **WND**

`use_norm` : **false**

`arrow_step` : **32**

![](https://openweathermap.org/themes/openweathermap/assets/img/WND_current_weathermaps2.png)

**URL example**

```
http://maps.openweathermap.org/maps/2.0/weather/WND/{z}/{x}/{y}?date=1552861800&appid={API key}
```

# **Joint display of speed wind (color) and wind direction (arrows) weather layer**

Custom parameters

`op` : **WND**

`use_norm` : **true**

`arrow_step` : **16**

![](https://openweathermap.org/themes/openweathermap/assets/img/WND2_current_weathermaps2.png)

**URL example**

```
http://maps.openweathermap.org/maps/2.0/weather/WND/{z}/{x}/{y}?date=1552861800&use_norm=true&arrow_step=16&appid={API key}
```

# **Default palettes**

| **Weather layer** | **Palette** | **Opacity** | **Fill bound** | **Use norm** | **Arrow step** |
| --- | --- | --- | --- | --- | --- |
| `PAC0`
Convective precipitation | 1:ACAAF7; 10:8D8AF3; 20:706EC2; 40:5658FF; 100:5B5DB1; 200:3E3F85 | 0.8 | 0 | - | - |
| `PR0`
Precipitation intensity | 0.000005:FEF9CA; 0.000009:B9F7A8; 0.000014:93F57D; 0.000023:78F554; 0.000046:50B033; 0.000092:387F22; 0.000231:204E11; 0.000463:F2A33A; 0.000694:E96F2D; 0.000926:EB4726; 0.001388:B02318; 0.002315:971D13; 0.023150:090A08 | 0.8 | 0 | - | - |
| `PA0`
Accumulated precipitation | 0:00000000; 0.1:C8969600; 0.2:9696AA00; 0.5:7878BE19; 1:6E6ECD33; 10:5050E1B2; 140:1414FFE5 | 0.6 | 0 | - | - |
| `PAR0`
Accumulated precipitation - rain | 0:E1C86400; 0.1:C8963200; 0.2:9696AA00; 0.5:7878BE00; 1:6E6ECD4C; 10:5050E1B2; 140:1414FFE5 | 0.6 | 0 | - | - |
| `PAS0`
Accumulated precipitation - snow | 0:00000000; 5:00D8FFFF; 10:00B6FFFF; 25.076:9549FF | 0.7 | 0 | - | - |
| `SD0`
Depth of snow | 0.05:EDEDED; 0.1:D9F0F4; 0.2:A5E5EF; 0.3:7DDEED; 0.4:35D2EA; 0.5:00CCE8; 0.6:706DCE; 0.7:514FCC; 0.8:3333CC; 0.9:1818CC; 1.2:C454B7; 1.5:C12CB0; 1.8:BF00A8; 2.5:85408C; 3.0:7F2389; 4.0:790087; 15:E80068 | 0.8 | 0 | - | - |
| `WS10`
Wind speed at an altitude of 10 meters | 1:FFFFFF00; 5:EECECC66; 15:B364BCB3; 25:3F213BCC; 50:744CACE6; 100:4600AFFF; 200:0D1126FF | 0.6 | 0 | - | - |
| `WND`
Joint display of speed wind (color) and wind direction (arrows) | 1:FFFFFF00; 5:EECECC66; 15:B364BCB3; 25:3F213BCC; 50:744CACE6; 100:4600AFFF; 200:0D1126FF | 0.6 | 0 | 0 | 32 |
| `APM`
Atmospheric pressure on mean sea level | 94000:0073FF; 96000:00AAFF; 98000:4BD0D6; 100000:8DE7C7; 101000:B0F720; 102000:F0B800; 104000:FB5515; 106000:F3363B; 108000:C60000 | 0.4 | 1 | - | - |
| `TA2`
Air temperature at a height of 2 meters | -65:821692; -55:821692; -45:821692; -40:821692; -30:8257DB; -20:208CEC; -10:20C4E8; 0:23DDDD; 10:C2FF28; 20:FFF028; 25:FFC228; 30:FC8014 | 0.3 | 1 | - | - |
| `TD2`
Temperature of a dew point | -65:821692; -55:821692; -45:821692; -40:821692; -30:8257DB; -20:208CEC; -10:20C4E8; 0:23DDDD; 10:C2FF28; 20:FFF028; 25:FFC228; 30:FC8014 | 0.3 | 1 | - | - |
| `TS0`
Soil temperature 0-10 сm | 203.15:491763; 228.15:4E1378; 235.15:514F9B; 239.15:446DA9; 243.15:5C85B7; 247.15:739FC5; 251.15:88A7C9; -255.15:6CBCD4; 259.15:87CADC; 263.15:A7D8E5; 267.15:A7D5AD; 271.15:D2E9C8; 275.15:FEFEBB; 279.15:F5CEBB; 283.15:F2B68A; 287.15:EE934F; 291.15:EB702D; 295.15:E8706E; 303.15:CC2C44; 313.15:CC0000; 323.15:990000 | 0.8 | 1 | - | - |
| `TS10`
Soil temperature >10 сm | 203.15:491763; 228.15:4E1378; 235.15:514F9B; 239.15:446DA9; 243.15:5C85B7; 247.15:739FC5; 251.15:88A7C9; -255.15:6CBCD4; 259.15:87CADC; 263.15:A7D8E5; 267.15:A7D5AD; 271.15:D2E9C8; 275.15:FEFEBB; 279.15:F5CEBB; 283.15:F2B68A; 287.15:EE934F; 291.15:EB702D; 295.15:E8706E; 303.15:CC2C44; 313.15:CC0000; 323.15:990000 | 0.8 | 0 | - | - |
| `HRD0`
Relative humidity | 0:db1200; 20:965700; 40:ede100; 60:8bd600; 80:00a808; 100:000099; 100.1:000099 | 0.8 | 1 | - | - |
| `CL`
Cloudiness | 0:FFFFFF00; 10:FDFDFF19; 20:FCFBFF26; 30:FAFAFF33; 40:F9F8FF4C; 50:F7F7FF66; 60:F6F5FF8C; 70:F4F4FFBF; 80:E9E9DFCC; 90:DEDEDED8; 100:D2D2D2FF; 200:D2D2D2FF | 0.5 | 0 | - | - |

# **Libraries to connect weather layers**

**Open Layers**

The following functions are available for the OpenLayers library:

- Classes of weather layer and weather stations layer
- Possibility to set your own style
- Classes with clustered markers
- Support of marker server clustering

**Leaflet**

The OpenWeatherMap javascript library is designed to work with the Leaflet mapping service. The current version of the library allows the following:

- Embedding of layer with current weather in cities
- Embedding of layer with weather stations
- The library supports customer clustering

**Leaflet library**

Another implementation of map based on Leaflet technology supports OWM's TileLayers and current city/station data. It is configurable with many options. For current city/station data the library supports refreshing the data in intervals, some types of client-side clustering (show only the station/city with the highest rank for a defined pixel square), custom image set (if you provide one), different languages (`en`, `de`, `ru`, `fr`, but translation is incomplete), `minZoom` and others.

Source and documentation (README.md) is available on GitHub [https://github.com/buche/leaflet-openweathermap](https://github.com/buche/leaflet-openweathermap)

Example of weather map: [https://github.com/owm-inc/VANE-intro/tree/master/apps](https://github.com/owm-inc/VANE-intro/tree/master/apps)